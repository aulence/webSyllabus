<root data-root="jQuery概述">
    <section class="mt0">
    	<h3>jQuery是什么？</h3>
    	<p>jQuery是一套<em>跨浏览器</em>的JavaScript库，简化HTML与JavaScript之间的操作。所谓的“跨浏览器”指的就是它使得同一个方法只需要写一次就能兼容几乎所有的主流浏览器，而不需要再像原生的JavaScript那样做很多浏览器兼容性的判断，因为在jQuery的内部都已经帮你做了。另外jQuery对JavaScript中很多操作繁琐的属性和方法都做了不同程度的封装，这使得开发者使用非常少的代码就实现足够多的功能。</p>

    	<p>jQuery的第一个版本是在2006年1月发布的，至今也有十余年的时间了。截止本课件落笔时间，jQuery的最新版本是3.2.1。它从第2版开始就逐渐的放弃了“IE系列”的浏览器，到第3版的时候已经完全放弃了IE浏览器。如果需要项目兼容到IE8或更低的版本，请使用1.x版本。</p>

    	<p>使用jQuery可以满足前端开发的以下需求，并使代码更加简单：</p>
    	<ul class="indent">
    		<li>跨浏览器的DOM元素选择</li>
    		<li>DOM的遍历与更改</li>
    		<li>事件处理及事件队列</li>
    		<li>CSS的获取和设置</li>
    		<li>各种特效和动画</li>
    		<li>链式操作</li>
    		<li>属性操作</li>
    		<li>工具函数</li>
    		<li>Ajax请求</li>
    	</ul>
    	<p>jQuery所能做的，也正是它的特色所在。表面上看上去这些平时不就是我们用JavaScript所做的事吗？是的，它要做的事和JavaScript是一样的。但是我们又为什么要花时间来学习jQuery呢？下一节会告诉你答案。</p>
    </section>
    <section>
    	<h3>为什么要学习使用jQuery？</h3>
    	<p>我们先来看这样一个全球网站使用框架（或库）统计的<a href="https://w3techs.com/technologies/overview/javascript_library/all" target="_blank" title="jQuery使用情况统计">数据</a>。</p>
    	<code class="indent">
			<img src="img/content/jquery/jquery-useing.jpg">
		</code>
		<p>统计图表右下角是统计的时间：2017年5月10日。</p>
		<p>从统计结果可以发现，虽然全球仍有24.7%的网站没有任何库或框架（包括只使用HTML+CSS和只使用HTML+CSS+JavaScript两种情况），在全部的参与统计的网站中有72.4%使用了jQuery，但只要使用了库或框架的网站96.2%的都选择了jQuery，这个数据相对于某知名网站在2013年12月28日统计的结果——全部网站57.5%的使用率和使用框架网站93.0%的使用率来讲，还有一定程度的增加。下面是该网站的部分截图：</p>
		<code class="indent">
			<img src="img/content/jquery/jquery-useing2.jpg">
		</code>
		<p>从以上两个数据的对比完全击破近些年来互联网上流传的“jQuery已死”的“谣言”。对于一个这么好用，比较有“背景”，并且还在不断进步的JavaScript类库来讲怎么可能这么容易“死”。相信也只是某些库和框架团队为了挽回其产品使用率不高的局面，而创造的“段子”而已，我们只需要相信数据是不会撒谎的这个道理即可。</p>
		<p>对于一个使用率如此之高，长期盘踞着互联网软件开发环境下No.1的库来说，我们没有理由不去学习。熟练地使用jQuery也是现在的互联网企业招聘前端开发的必备技能条件之一，如果一个开发者不会jQuery，那他和“前端工程师”这几个字是没有什么关系了。</p>
		<p>如果是从和原生JavaScript语法比较的角度出发，我们可以来看这样一个简单的模拟需求：实现一个需要对AJAX传参对象进行序列化的函数。</p>
    	<p>原生的JavaScript应该是这样写的：</p>
    	<code class="indent">
			<img src="img/code/jqcode/code-jq-001.jpg">
		</code>
    	<p>而jQuery要得出同样的结果只需要这样写：</p>
    	<code class="indent">
			<img src="img/code/jqcode/code-jq-002.jpg">
		</code>
   		<p>稍加观察就可以发现，使用jQuery完全省略了上面函数定义的部分，而是直接使用了一个叫做“$.param()”的函数就完成这件事。（从原理上来讲“param”也只是“$”对象，一般称作“JQ对象”。）当然，这只是jQuery的冰山一角，他对JavaScript的封装堪称神奇，再以后我们自然会体会到。</p>
   		<p>然后再从文件体积来说，jquery-3.2.1这个版本的“<em title="也称压缩版、mini版">线上版</em>”传输只有不到85kb，对于一些现有的动则200kb起价的框架和库来说已经算是非常小的了，甚至是一些只能完成单一职能的插件都远远大于这个数（如ECharts 3最精简的“阉割”版也有240kb的传输体积）。</p>
   		<code class="indent">
			<img src="img/content/jquery/jquery-size.jpg">
		</code>
   		<p>所以，那些说jQuery文件体积过大的言论显然也是站不住脚的，但以讹传讹，现在仍有些团队项目的负责人以jQuery文件体积过大为由，拒绝下属提出的使用jQuery的要求。对于这种“霸权主义”来讲，我们作为一个优秀的开发者一定要听之任之，不不，是要与其争辩出一个高下。如果一定要说比较个小的，现在也只有同期的<em title="一个轻量级的MVVM框架">vue.js</em>的mini版的75kb可以拿来说说了，虽然他们的“职责”和分类都不太一样。</p>
    </section>
    <section>
    	<h3>jQuery和JavaScript的关系</h3>
		<p>简单地说，jQuery就是对JavaScript进行封装而出来的一个库。这和我们以前用JavaScript来写函数和方法，让一段段的语句有更强的可复用性和可维护性是一样的，只是jQuery把这件事情做得更加的极致了而已。</p>
   		<p>jQuery的原理就是用它自定的一个变量名“jQuery”作为对象名，然后再赋值给“<em>$</em>”这个变量，并且还提供了一个noConflict()方法回调来允许开发自定义变量名从而防止和其它框架库命名的冲突。以下是从jQuery为压缩的源码里稍作调整截来的代码片段：</p>
   		<code class="indent">
			<img src="img/code/jqcode/code-jq-003.jpg">
		</code>
   		<p>从这段代码里可以大概看得出，它通过将同一个函数实例化后的对象“jQuery”赋值给了“$”（），并且将其添加进“window”对象，使得它们成为了一个全局对象。这样一来我们就可以在接下来的代码中去使用“$”（或jQuery）这个对象的各种方法了。</p>
   		<p>其实两者的区别从本章上一节的那个代码示例就可以看出来，JavaScript部分的代码中函数的定义是我们自己写的，而jQuery部分的代码则分成了两部分，一部分是jQuery代码内部帮我们处理了，我们只需要做第二部分，就是$.param()方法的调用。</p>
   		<p>好吧，为了满足开发者们的求知欲，现在就将jQuery关于param()方法实现部分的代码贴出来：</p>
   		<code class="indent">
			<img src="img/code/jqcode/code-jq-004.jpg">
		</code>
   		<p>这里面的代码也就是平时我们使用的原生JavaScript代码而已，只有“jQuery.each”这个方法是它调用的自身的方法。</p>
   		<p>通过这些介绍，相信大家也基本能明白jQuery和JavaScript到底是怎么样一种关系了。以后在使用jQuery的各种方法的时候也请抽点时间来思考一下这个方法如果要我们用原生的JavaScript去写，应该怎么实现。这使得我们可以做到<em title="即不依赖于jQuery也能写出jQuery一样代码">jQuery-free</em>，也能更加透彻地去理解jQuery的架构思维，以助于我们在能力足够的时候也能写出自主研发的JS库或框架。</p>
    </section>
    <section>
    	<h3>安装使用jQuery</h3>
		<p>可以通过jQuery的官方网站<a href="http://jquery.com/" title="前往jQuery官网" target="_blank">http://jquery.com</a>找到环境需要版本的链接进行下载。</p>
  		<code class="indent">
			<img src="img/content/jquery/jquery-home.jpg">
		</code>
  		<code class="indent">
			<img src="img/content/jquery/jquery-download.jpg">
		</code>
   		<p>也可以通过<em>npm</em>（推荐）进行下载。</p>
    	<p>通过npm下载最新版本的方式：</p>
    	<code class="cmd indent">npm install -g jquery</code>
    	<p>下载指定版本（第1.x版的最新版本）：</p>
    	<code class="cmd indent">npm install -g jquery@1</code>
    	<p>下载完成后的结果大致是下面这样，由于示例环境里面配置了npm的cache（缓存），所以就算删掉jQuery重新下载也会省略掉，如果是第一次下载输出的信息应该会比较多。复制输出信息倒数第二行的那个路径可以帮你快速地定位到下载jQuery的文件目录下，下载的jQuery文件夹包含在一个叫做“node_modules”的文件夹下。</p>
    	<code class="indent">
			<img src="img/content/jquery/jquery-npmdownload.jpg">
		</code>
    </section>
    <section>
    	<h3>jQuery在页面中的引用</h3>
		<p>随着Web前端技术的发展，对一个框架库的引用方式越来越多样化了。我们这里主要介绍3种方式：</p>
   		<dl class="attrExplain">

   			<dt>直接文件引用</dt>
   			<dd>将下载完成的jQuery的主文件，放在项目下的指定目录，然后通过&lt;script&gt;标签的src属性进行相对路径的引用，和&lt;img&gt;标签引用一张图片一样简单。</dd>
   			<dd>
				<code>
					<img src="img/code/jqcode/code-jq-005.jpg">
				</code>
  			</dd>

  			<dt>AMD模式下的依赖请求</dt>
  			<dd>如果项目使用<em titile="Asynchronous Module Definition，即异步模块家在机制">AMD</em>模式，那只需要在你需要使用jQuery的JS文件或者入口JS文件开始的地方加上这样一句话即可：</dd>
  			<dd>
  				<code class="cmd">require("jquery");</code>
  			</dd>
  			<dd>如果需要使用模块化的jQuery来保证最终生成的文件最小化，那还可以require有各自“职责”的jQuery的模块文件。这在我们以后的“前端自动化构建工具之webpack”里会涉及到，现在我们不需要这样做，而且也暂时不具备这样的技术条件环境。</dd>

  			<dt>使用<em title="Content Delivery Network，即内容分发网络">CDN</em>引用</dt>
  			<dd>首先我们来看一下【维基百科】上对CDN的阐述:</dd>
  			<dd>
				<cite class="paragraph">内容分发网络（Content delivery network或Content distribution network，缩写：CDN）是指一种通过互联网互相连接的电脑网络系统，利用最靠近每位用户的服务器，更快、更可靠地将音乐、图片、视频、应用程序及其他文件发送给用户，来提供高性能、可扩展性及低成本的网络内容传递给用户。</cite>
				<cite class="paragraph">内容分发网络的总承载量可以比单一骨干最大的带宽还要大。这使得内容分发网络可以承载的用户数量比起传统单一服务器多。也就是说，若把有100Gbps处理能力的服务器放在只有10Gbps带宽的数据中心，则亦只能发挥出10Gbps的承载量。但如果放到十个有10Gbps的地点，整个系统的承载量就可以到10*10Gbps。</cite>
				<cite class="paragraph">同时，将服务器放到不同地点，可以减少互连的流量，进而降低带宽成本。</cite>
			</dd>
  			<dd>在国内，可以通过比较著名的CDN网站<a href="http://www.bootcdn.cn/" target="_blank">http://www.bootcdn.cn</a>查找自己需要的资源。</dd>
  			<dd>
  				<code>
					<img src="img/content/jquery/bootcdn-1.jpg">
				</code>
  			</dd>
  			<dd>输入jquery后，在下方找到需要的jquery，如图所示：</dd>
  			<dd>
  				<code>
					<img src="img/content/jquery/bootcdn-2.jpg">
				</code>
  			</dd>
  			<dd>选择图中“自适应”按钮，然后复制需要的版本链接。</dd>
  			<dd>
  				<code>
					<img src="img/content/jquery/bootcdn-3.jpg">
				</code>
  			</dd>
  			<dd>然后就可以像我们第一种引用方式那样引用了。</dd>
  			<dd>
				<code>
					<img src="img/code/jqcode/code-jq-006.jpg">
				</code>
  			</dd>
			<dd>关于CDN的使用需要注意两点：</dd>
  			<dd>第一，在客户端环境下，特别是支持离线应用的<em title="即生成手机能安装的app">webAPP</em>里最好不要使用这种方式，因为使用CDN就算再快也是需要网络的，如果网络情况不好或没有网的情况下会导致jQuery文件无法正常加载，导致程序失效，而且在webAPP里引用本地资源肯定是最好的选择。在生产环境下，更是没有必要这样做。</dd>
  			<dd>第二，就是解释一下刚才为什么要求选择“自适应”的CDN，因为有的网站只支持http，有的又支持https，有的两种都支持，如果不加上“//”前面的协议名称CDN服务器会根据当前网站的协议类型自动选择需要引用的资源，这种做法更为“以不变应万变”一些。</dd>
   		</dl>
   		<p>但需要记得的是，无论采用哪一种引用方式，在我们自己写代码时都应该保证在jQuery引用地方的后面，否则都不能访问到jQuery主对象，从而产生控制台报错。这就和我们平时定义一个全局变量一样，需要先声明然后再使用是一回事。</p>
    </section>
    <section>
    	<h3>第一句jQuery代码</h3>
		<p>好了，上面的基本理论如果了解了，那我们现在开始创建一个项目的基本目录结构，并创建必须的文件。这里我们使用上一节中讲到的第一种引用方式，把jQuery文件引用到我们的index.html文件里，并在引用jQuery文件的后面引用我们自己创建的一个空的index.js文件。像这样：</p>
   		<code class="indent">
			<img src="img/code/jqcode/code-jq-007.jpg">
		</code>
   		<p>需要注意的是，作为学习阶段我们引用的jQuery文件最好是完整未压缩版的。这样一方面方便我们随时去阅读源码，在遇到报错的时候也能更好地排错。但切记在线上环境的时候一定要使用压缩后的jQuery，它比完整版的体积要小60%以上，特别是在使用GZIP压缩后，传输体积会更加的小。</p>
   		<p>基本准备工作完成，可以开始写我们的第一句jQuery代码了。首先在HTML文件里创建一个列表，并在下方创建一个如下图的div标签：</p>
   		<code class="indent">
			<img src="img/code/jqcode/code-jq-008.jpg">
		</code>
   		<p>现在我们要做的事是当点击列表项中的任意一项后在下方div的span标签里把选择的内容显示在里面。到这里先停一停，深入思考一下如果我们用JavaScript来写应该是一个怎么样的流程。</p>
   		<p>而用jquery我们只需要在index.js文件里写上一段以下代码即可：</p>
   		<code class="indent">
			<img src="img/code/jqcode/code-jq-009.jpg">
		</code>
   		<h4><a href="html-pages/jquery/codeEffect/code-001.html" target="_blank">运行效果</a>：</h4>
		<iframe data-iframe-coderun="" class="codeEffect" src="html-pages/jquery/codeEffect/code-001.html" ></iframe>
   		<p>什么感觉？是不是看起来和读普通文字一样顺畅直观。在这段代码里既没有JS那种大篇幅的循环绑定，又没有DOM那种繁琐的节点操作，连事件名都省掉了“on”的前缀。也就是说，写jQuery可以更加贴近我们的思维流程，把抽象的事做得更加的形象，更加的简便，减少了我们组织思维和组织代码的时间。</p>
    </section>
    <section>
    	<h3>防止其它库和jQuery冲突</h3>
		<p>我们知道，变量的命名可以以英文字母、下划线和$符开头。英文字符的命名容易产生重名，下划线美观度又不够。所以很多编程语言，以至于很多JS框架或库都喜欢用“$”符来作为变量名，jQuery就是其中的“著名代表”。这样一来就造成一个问题，如果一个项目中若采用多种第三方的插件、框架和类库难免会产生“$”名称的冲突，而使用“jQuery”这个默认对象作为名称书写起来又比较麻烦，且容易写错。为了解决这个问题，jQuery使用了一个<em title="意为不冲突">noConflict()</em>方法来让开发者可以自定义jQuery对象（$对象）的名称。</p>
   		<code class="indent">
			<img src="img/code/jqcode/code-jq-010.jpg">
		</code>
   		<p>这样一来我们就可以使用“jq”作为我们全局的jQuery对象名了。但若我们开发的项目只使用了jQuery这个库，或者使用的其它第三方程序与jQuery没有名称上的冲突，那是完全没有必要这要做的。毕竟技术的一些关键名称会形成开发者的一些习惯，也是团队间无声的交流语言。如果只是图一个个性，把这个名字改了，只会给团队开发造成一些不必要的困扰。</p>
    </section>
    <section>
    	<h3>将jQuery对象转为JS对象</h3>
		<p>要说明本节的问题，我们得先明白一个基本理论，就是通过DOM的节点选择器和jQuery的选择器选择出来的结果其实并不是同样的东西现在我们就拿上节中的那个代码来举例，分别用DOM的选择器和jQuery的选择器进行选择，并在控制台内输出。</p>
   		<code class="indent">
			<img src="img/code/jqcode/code-jq-011.jpg">
		</code>
   		<p>通过输出的结果对比可以发现，虽然DOM和jQuery输出的结果的类型都是对象，但它们专业术语的叫法却不同。DOM选择器选择出的结果叫做“<em>节点对象</em>”（也称“Element对象”），而jQuery选择器选择出的对象叫做“<em>JQ对象</em>”。再从输出的选择结果来看，DOM输出的结果看上就好像是一个普通的HTML标签（实际上是document对象树的一个分支），而jQuery的输出结果像是一个数组，然而，这并不是真正的数组，因为他不能直接去使用JavaScript的数组提供的方法，它就是一个名为“JQ对象”的类似数组。</p>
   		<p>明白这个道理之后，我们就需要知道既然对象种类都不一样，那需要使用的属性和方法就不一样了。我们针对这个问题来做一个小测试：</p>
   		<code class="indent">
			<img src="img/code/jqcode/code-jq-012.jpg">
		</code>
   		<p>通过测试发现，无论是DOM去使用jQuery的方法，还是jQuery去使用DOM的属性都会产生刺眼的报错。也就是说，虽说jQuery是一个基于JavaScript、基于DOM的类库，但很多时候它们的语法也并非一定是互通的。</p>
   		<p>但我们在学习jQuery初级阶段的时候，肯定不可能了解它所有的方法（jQuery的绝大部分操作都是使用对象的形式），可能有时需要使用原生的JavaScript或DOM来帮助我们完成特定的功能，但又不想使用DOM冗长的操作语句怎么办呢？实际上是有个小技巧可以利用的。</p>
   		<p>我们稍微修改一下刚才控制台的代码，大家再观察一下产生的结果：</p>
   		<code class="indent">
			<img src="img/code/jqcode/code-jq-013.jpg">
		</code>
   		<p>此时浏览器里HTML被修改的列表内容已经变成了红色的字体：</p>
   		<code class="indent">
			<img src="img/code/jqcode/code-jq-014.jpg">
		</code>
   		<p>那大家有没有观察出是那里的代码修改之后让本来报错的代码产生效果了呢？由于代码不多，这个我就不指明了。以后凡是需要用到JS或者DOM的属性或方法的时候都可以使用这样的方式来处理。但当对jQuery足够熟悉后还是要避免这种做法，以免给团队协作带来一些不必要的麻烦，也不至于“抹杀”掉jQuery本来具有的一些“优质特性”（如无需循环绑定事件的机制）。</p>
    </section>
</root>






